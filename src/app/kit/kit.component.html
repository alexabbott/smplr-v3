<div class="kit">
    <div class="kit-info" [ngClass]="{ 'new-kit': newKit }">
        <div class="meta" *ngIf="!newKit">
            {{ currentKit.name }} by <img *ngIf="kitUser" [src]="kitUser.photoURL" class="avatar">
        </div>
        <div class="menu" *ngIf="user">
            <mat-icon [matMenuTriggerFor]="menu" class="menu-icon">more_horiz</mat-icon>
            <mat-menu #menu="matMenu">
                <button mat-menu-item (click)="openSaveKitDialog(false)">Save as new kit</button>
                <button mat-menu-item (click)="openSaveKitDialog(true)" *ngIf="user && kitUser && kitUser.id === user && !newKit">Edit current kit</button>
                <button mat-menu-item (click)="openSaveSequenceDialog()" *ngIf="user && kitUser && kitUser.id === user && !newKit">Save kit sequence</button>
            </mat-menu>
        </div>
    </div>
    <div class="kit-samples">
        <div
            *ngFor="let sample of kitSamples; let i = index"
            id="sample{{i+1}}"
            (mousedown)="globalService.playSample($event)"
            (mouseup)="globalService.stopSample($event)"
            dnd-droppable
            [dropZones]="['zone' + (i + 1)]"
            (onDropSuccess)="replaceSample($event)">
            <sample
                [sample]="sample"
                [index]="i+1"
                [component]="'sampler'"
                [active]="activeKeys[keys[i]]"
                [showFavorite]="false"
            >
            </sample>
        </div>
    </div>
</div>