<div class="kit">
    <div class="kit-info" [ngClass]="{ 'new-kit': newKit }">
        <div class="meta" *ngIf="!newKit && currentKit.name">
            {{ currentKit.name }} by
            <img
                [src]="kitUser.photoURL"
                class="avatar"
                (click)="openUserProfile()"
            >
            <favorite
                [collection]="'kits'"
                [id]="currentKit.slug"
                [favoritesCount]="currentKit.favoritesCount"
                [disabledFavorite]="!user"
                class="favorite-icon"
            ></favorite>
        </div>
        <div class="menu" *ngIf="user">
            <mat-icon [matMenuTriggerFor]="menu" class="menu-icon">more_horiz</mat-icon>
            <mat-menu #menu="matMenu">
                <button mat-menu-item (click)="openSaveKitDialog(false)">Save as new kit</button>
                <button mat-menu-item (click)="openSaveKitDialog(true)" *ngIf="user && kitUser && kitUser.id === user && !newKit">Edit current kit</button>
                <button mat-menu-item (click)="openSaveSequenceDialog()" *ngIf="user && kitUser && kitUser.id === user && !newKit">Save kit sequence</button>
            </mat-menu>
        </div>
    </div>
    <div class="kit-samples">
        <div
            *ngFor="let sample of kitSamples; let i = index"
            id="sample{{i+1}}"
            (mousedown)="globalService.playSample($event)"
            (mouseup)="globalService.stopSample($event)"
            dnd-droppable
            [dropZones]="['zone' + (i + 1)]"
            (onDropSuccess)="replaceSample($event)">
            <sample
                [sample]="sample"
                [index]="i+1"
                [component]="'sampler'"
                [active]="activeKeys[keys[i]]"
                [showFavorite]="false"
                [showKeys]="true"
            >
            </sample>
        </div>
    </div>
</div>